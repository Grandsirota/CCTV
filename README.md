# ระบบตรวจจับบุคคลอัจฉริยะ - NT Telecom

ระบบตรวจจับบุคคลอัจฉริยะด้วย AI สำหรับกล้องวงจรปิด โดยใช้ YOLO เพื่อตรวจจับเฉพาะบุคคล (person) และแจ้งเตือนผ่าน Telegram โดยทีเมื่อตรวจพบบุคคลในกล้อง

## คุณสมบัติระบบ

- ตรวจจับเฉพาะ บุคคล (person) จากกล้องทุกตัวแบบเรียลไทม์
- บันทึกวันและเวลาที่ตรวจพบ พร้อมบันทึกรูปภาพ
- แสดงชื่อกล้องที่พบบุคคล
- บันทึกข้อมูลการตรวจจับในฐานข้อมูล SQLite
- แสดงวันและเวลาแบบเรียลไทม์ในหน้าจอแสดงผล
- รองรับการทำงานกับกล้องหลายตัวพร้อมกัน
- ส่งการแจ้งเตือนผ่าน Telegram เมื่อตรวจพบบุคคล
- ป้องกันการตรวจจับคนเดิมซ้ำๆ ภายในระยะเวลาที่กำหนด (5 นาที)

## ส่วนประกอบของระบบ

1. **หน้าแดชบอร์ด** - แสดงภาพจากกล้องปัจจุบัน, สถิติการตรวจจับ และการตรวจจับล่าสุด
2. **หน้ากล้องทั้งหมด** - แสดงภาพจากทุกกล้องพร้อมกัน
3. **หน้าการตรวจจับ** - แสดงประวัติการตรวจจับทั้งหมด พร้อมภาพถ่าย
4. **หน้ารายงาน** - แสดงกราฟและสถิติการตรวจจับ
5. **หน้าตั้งค่า** - สำหรับปรับแต่งการทำงานของระบบ

## การติดตั้ง

### 1. ติดตั้ง Python และแพ็คเกจที่จำเป็น

```bash
# ติดตั้ง Python 3.8 หรือใหม่กว่า
pip install -r requirements.txt
```

### 2. ดาวน์โหลดโมเดล YOLOv8

```bash
# ดาวน์โหลดโมเดล YOLOv8m
wget https://github.com/ultralytics/assets/releases/download/v0.0.0/yolov8m.pt
```

### 3. ตั้งค่า Telegram Bot

1. สร้าง Telegram Bot ผ่าน BotFather และรับ Token
2. ใส่ Token และ Chat ID ในไฟล์ `utils.py` หรือผ่านหน้าตั้งค่าในแอปพลิเคชัน

### 4. เริ่มต้นใช้งานระบบ

```bash
python app.py
```

ระบบจะทำงานที่ http://localhost:5000

## โครงสร้างไฟล์

- `app.py` - ไฟล์หลักของแอปพลิเคชัน
- `camera.py` - จัดการการเชื่อมต่อกล้องและการตรวจจับบุคคล
- `db.py` - จัดการฐานข้อมูล
- `utils.py` - ฟังก์ชันช่วยเหลือต่างๆ
- `static/` - ไฟล์ CSS และ JavaScript
- `templates/` - ไฟล์ HTML
- `detection_data/` - ที่เก็บข้อมูลการตรวจจับและรูปภาพ

## การใช้งาน GPU

ระบบรองรับการใช้งาน GPU ผ่าน PyTorch และ CUDA โดยอัตโนมัติเพื่อเพิ่มประสิทธิภาพในการตรวจจับวัตถุ หากต้องการใช้งาน GPU ต้องติดตั้ง CUDA และ cuDNN ให้เรียบร้อย

## การตั้งค่ากล้อง RTSP

สามารถเพิ่มหรือแก้ไขกล้อง RTSP ได้ที่ไฟล์ `app.py` โดยแก้ไขตัวแปร `rtsp_cameras` ตามรูปแบบ:

```python
rtsp_cameras = {
    "กล้อง 1": "rtsp://user:password@ip_address:port/stream_path",
    "กล้อง 2": "rtsp://user:password@ip_address:port/stream_path",
    ...
}
```

## การปรับแต่งค่า

สามารถปรับแต่งการทำงานของระบบได้ผ่านหน้าตั้งค่าในแอปพลิเคชัน:

1. **ความเชื่อมั่นขั้นต่ำ** - ปรับค่าความมั่นใจขั้นต่ำในการตรวจจับบุคคล (0-100%)
2. **ระยะเวลาตรวจจับซ้ำ** - กำหนดระยะเวลาที่จะไม่ตรวจจับคนเดิมซ้ำ (นาที)
3. **การแจ้งเตือน** - เปิด/ปิดการแจ้งเตือนผ่าน Telegram
4. **ตั้งค่า Telegram** - กำหนด Token และ Chat ID สำหรับการแจ้งเตือน

## การสนับสนุน

หากพบปัญหาการใช้งานหรือมีข้อเสนอแนะ กรุณาติดต่อทีมสนับสนุน

## สงวนลิขสิทธิ์

© 2025 NT Telecom ระบบตรวจจับบุคคลอัจฉริยะด้วย AI